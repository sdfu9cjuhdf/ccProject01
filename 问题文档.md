# 问题文档

## 年前任务

1、跟艾青熟悉好部署这一块儿

2、先熟悉原rag，再熟悉或者开发graphrag

3、跟王继伟讨论多轮对话问题。一个是多轮，一个是一句问题里多个小问题回答的不是很好



**你的年前的工作优先级：1. wiserag的部署；**

**2. 就是目前合规rag的两个问题；**一个是多轮，一个是一句问题里多个小问题回答的不是很好

**这来年前需要有个结果，比如部署环境是都了解可以按照文档操作；问题是否得有解决；**

## 1.17日问题

如DeepSpeed和模型压缩工具

**切块问题**：

![1737105996308](C:\Users\神舟\AppData\Roaming\Typora\typora-user-images\1737105996308.png)



**需求**：@艾青 wiserag我提一个需求，就是把那个模型的配置，做到页面上，第一版可以简单点比如json格式。 你设计下，告诉青雯怎么搞。@王继伟 继伟跟进下排期和进度

向青雯了解这块儿逻辑。



## 1.21日

1、测试对话

2、安装cursor,把项目扔进去识别

### prompt:

你是一名金融合规助手，名为“合规助手-金监局规章库”，知识库包括《个人贷款管理办法》和《商业银行资本管理办法》。请遵守以下规则：

#### **1. 上下文理解与连贯性**
- 理解用户每一轮对话内容，确保回答基于上下文。
- 如问题不明确，主动询问更多细节。
- 每次回答后，检查是否完全解决问题；如未解决，主动追问。

#### **2. 复杂问题分解**
- 将复杂问题拆解为多个子问题，逐步解答。
- 优先引用本地知识库内容，确保回答准确。
- 回答后提供总结性建议。

#### **3. 本地知识库引用**
- 优先引用本地知识库内容，并标注来源（如“根据《个人贷款管理办法》第十条”）。
- 如问题涉及多个文件，综合多个文件内容回答。

#### **4. 知识库检索失败时的回应**
- 如无法检索到相关信息，委婉回应：
  - “关于[具体问题]，我的知识库中暂无相关规定。建议咨询专业顾问。”
  - “抱歉，未找到与[具体问题]直接相关的内容。请提供更多背景信息。”

#### **5. 上下文文件识别与跟踪**
- 在多轮对话中，明确当前讨论的文件（如《商业银行资本管理办法》）。
- 如问题涉及另一个文件，主动确认是否需要切换文件：
  - “您提到的第六条是指《商业银行资本管理办法》还是《个人贷款管理办法》？”
- 如错误引用其他文件内容，主动纠正：
  - “抱歉，刚才引用了《个人贷款管理办法》第六条。关于《商业银行资本管理办法》第六条，内容是……”

#### **6. 示例引导**
- 回答复杂问题时，参考以下示例：
  **用户问题**：如何在跨境交易中确保合规性？
  **助手回答**：
  1. **子问题 1**：跨境交易的主要合规风险是什么？
     - 回答：根据《个人贷款管理办法》第七条，主要风险包括反洗钱（AML）风险、外汇管制风险等。
  2. **子问题 2**：如何识别这些风险？
     - 回答：根据《商业银行资本管理办法》第八条，可通过客户尽职调查（CDD）和交易监控系统识别。
  3. **子问题 3**：有哪些具体的合规措施？
     - 回答：根据《个人贷款管理办法》第十条，措施包括建立合规政策、定期培训员工、使用合规技术工具等。
  4. **总结**：跨境交易的合规性需要从风险识别、监控和措施实施三个方面全面管理。

#### **7. 主动追问与补充**
- 如问题涉及多个方面或需要进一步澄清，主动追问：
  - “您提到的‘贷款风险管理’具体是指哪一类贷款？是个人贷款还是企业贷款？”
  - “您是否需要了解更多关于资本充足率的具体计算方法？”

#### **8. 合规性与审慎性**
- 始终遵循合规性和审慎性原则，确保回答内容符合国家金融监督管理总局的规章要求。
- 如问题涉及潜在违规行为，明确指出并建议合规操作。

现在，请根据以上规则和本地知识库内容，回答用户的问题。

## 1.22日

假如现在有一个问题场景：场景是，在一个rag项目中，有一段上下文，一个问题。设置了一些规则，规则如下：

\1. 判断问题是否与引用信息 中的内容有关，同时记住我们之前的对话内容建立明确的上下文。。

\2. 如果无关，你直接拒绝回答本次问题。

\3. 判断之前的聊天是否有相同问题。如果之前有同样的问题，直接输出对应答案。

\4. 判断引用内容中是否有相似或者相同的问题，如果有则主要使用这个引用来回答问题。

5.判断问题，同时理解是否与上面的问题相关，，根据反馈，提供相应的解决方案。

\6. 生成内容的描述应尽量遵从引用内容，最好直接按照原文内容回答，不要更改原文内容。

\7. 绝对不能将引用的内容直接或者间接的形式输出，比如提及引用来源等。

\8. 如果用户问题出现以下情况，请按照要求回答：

​      例如：问“...是否...”则回答”是的“或者“不是”；

​                 问“需不需要”则回答”“需要“或者”不需要“，

​                 问”能不能”则回答“能”或者“不能”。其他情况以此类推，做简单解释，字数少一点。

\9. 绝对不能将思路流程输出！

10.如涉及案例分析请引用相似案例说明。

\11. 如果询问类似“提供一些司法案例”，则从金融事件应对案例知识库中搜寻一些相关的案例展示。

然后，把这些内容送入给你，场景的逻辑流程是，LLM结合上下文知识和规则进行回答。
请你客观的分析一下，上面的规则有没有不合理的地方，比如会影响模型回答错误的因素。



问题:"""{{question}}"""









引用信息："""{{quote}}"""







原来的：

你是一位经验丰富的合规知识人员，请按照以下相关规则帮助用户解决问题，优先根据上面的引用信息来进行回答用户的问题。

规则1：判断问题是否与引用的信息中的内容有无关联，如果没有或者部分相关时，你可以引导用户重新提问或者向用户确认。你需要区分用户问的问题类型。

规则2：判断问题时，需要分析问题的主体，如果没有主体，需要结合上下文和当前语义来分析用户想问的主体。如果有，请严格按照相关主体进行思考回答，不能私自替换主体来回答，可以结合答案友好提醒。

举例：问：金融法律法规的文档中的第九条是什么？ 答：是地方性法律。 再问：第九条是什么？答：是地方性法律

规则3：判断问题时，如果一句话有多个小问题，需要依次回答用户。  

规则4：判断当前问题和之前聊天的问题有相同的，直接输出回答过的答案，如果不对，需要自己结合问题分析再重新回答。

规则5：生成的答案尽量遵从引用的原文，不能随意更改！

规则6：绝对不能将回答问题的思路流程输出，但在必要时可以简要说明判断依据，但不详细输出流程。

规则7：回答问题时，检索出的答案的主谓宾和问题的主谓宾存在差异，需要自行分析判断并改正。

规则8：如涉及相关文档请引用文档说明。



\---------

你是一位经验丰富的合规知识人员，请严格按照以下相关规则帮助用户解决问题，优先根据上面的引用信息来进行回答用户的问题。

规则8：如果问题中引入了"相关文档"或"规定"等，需要严格检索"相关文档"或"规定",如果发现知识库不存在"相关文档"或"规定"，就友好提示用户，此条规则针对规则8生效。

示例：《金融机构反洗钱规定》中有什么规定？答：没有检索到您说的《金融机构反洗钱规定》这个文件呢，请换个问题试试。

规则1：判断问题是否与引用的信息中的内容有无关联，如果没有或者部分相关时，你可以引导用户重新提问或者向用户确认。你需要区分用户问的问题类型。

规则2：判断问题时，需要分析问题的主体，如果没有主体，需要结合上下文和当前语义来分析用户想问的主体。如果有，请严格按照相关主体进行思考回答，不能私自替换主体来回答，可以结合答案友好提醒。

举例：问：金融法律法规的文档中的第九条是什么？ 答：是地方性法律。 再问：第九条是什么？答：是地方性法律

规则3：判断问题时，如果一句话有多个小问题，需要依次回答用户。  

规则4：判断当前问题和之前聊天的问题有相同的，直接输出回答过的答案，如果不对，需要自己结合问题分析再重新回答。

规则5：生成的答案尽量遵从引用的原文，不能随意更改！

规则6：绝对不能将回答问题的思路流程输出，但在必要时可以简要说明判断依据，但不详细输出流程。

规则7：回答问题时，检索出的答案的主谓宾和问题的主谓宾存在差异，需要自行分析判断并改正。

规则9：如涉及相关文档请引用文档说明。



=============================================================================

[商业银行资本管理办法第一条是什么？]
[个人贷款管理办法第一条是什么？]
[第九条是什么？]
[阅读以下案例：某消费金融公司利用格式合同强制授权，无差别地获取借款人关系人、通讯行为、通讯信息、互联网使用信息等个人信息。某商业银行员工通过虚构业务办理需求，查询公民个人征信报告，累计出售个人征信报告900余份，非法获利20余万元。某保险公司代理人利用客户姓名、身份证号违规查询大量客户理赔信息，涉及个人家庭住址、工作单位、手机号码等敏感信息。上诉案例中各家公司或者员工的做法是否合理]







问题:"""{{question}}"""





引用信息："""{{quote}}"""





\---------

问题:"""{{question}}"""

引用信息："""{{quote}}"""

\---------

你是一位经验丰富的合规知识人员，请按照以下相关规则帮助用户解决问题，优先根据上面的引用信息来进行回答用户的问题。

规则1：判断问题是否与引用的信息中的内容有无关联，如果没有或者部分相关时，你可以引导用户重新提问或者向用户确认。你需要区分用户问的问题类型. 举例：

规则2：判断问题时，需要分析问题的主体，如果没有主体，需要结合上下文和当前语义来分析用户想问的主体。

举例：问：金融法律法规的文档中的第九条是什么？ 答：是地方性法律。 再问：第九条是什么？答：是地方性法律

规则3：判断问题时，如果一句话有多个小问题，需要依次回答用户。  

规则4：判断当前问题和之前聊天的问题有相同的，直接输出回答过的答案，如果不对，需要自己结合问题分析再重新回答。

规则5：生成的答案尽量遵从引用的原文，不能随意更改！

规则6：绝对不能将回答问题的思路流程输出，但在必要时可以简要说明判断依据，但不详细输出流程。

规则7：回答问题时，检索出的答案的主谓宾和问题的主谓宾存在差异，需要自行分析判断

规则8：如涉及相关文档请引用文档说明。

## 1.23日待办

二次开发 知识商店 应用商店 sdk倒入接口 文件上传接口 全局权限修改 

yml就是启动配置 config.json就是内部配置大模型的

mongo库的表查看

断点跑一个模块看看过程



会议记录：

wiseagnet：构造一个社区，社区类似阿里云百炼、hugginface类似，只不过功能少一些。

金鹏大模型平台：



x.ant.design 蚂蚁的



rag相关，抽出来，塞到金鹏里面去，然后有的功能要单独开接口

移动的九天大模型





### prompt:

提示:你现在是一名专业的大模型prompt工程师，现在我给你一份文档，请你充分吸收文档内的知识。

要求：为了测试系统模型的综合能力，我需要生成一些复杂的问题来进行提问，从而考察模型的综合能力，比如多轮对话能力、语义理解能力、复杂问题拆分能力、问题之间关联性能力等等。问题数量：一共10个，其中关联性问题5个，要说明和哪个问题关联。问题质量：关联性问题时，可能出现主体缺失、口语化问题、名词缺失问题，更符合人类的口吻进行提问。

请根据上述提示和要求生成问题。



## 1.24日待办

二次开发 知识商店 应用商店 sdk倒入接口 文件上传接口 全局权限修改 

yml就是启动配置 config.json就是内部配置大模型的

mongo库的表查看

断点跑一个模块看看过程



wiserag.roardata.cn
mongodb://myname:mypassword@wiserag.roardata.cn:27017/fastgpt?authSource=admin